---
title: "Nacos"
date: 2023-07-01T16:00:00+08:00
tags: []
categories: ["Distributed System"]
summary: "TODO"
---

# 分片

Nacos的写请求会平均分配到不同的节点上.

![](https://dl.axlis.cn/blog/ds/9.png)

Nacos启动时, 会从配置文件读取整个集群的节点列表, 并维护一份排序后的健康节点的列表.

Nacos收到注册请求时, 会对服务名进行Hash, 并路由到相应的节点进行处理.

# 功能

* 订阅: 当服务端数据变化时, 客户端能够收到通知; 并且客户端也会定时轮询来更新数据.
* 心跳: 当客户端启动时, 会有定时任务向服务端发送心跳. 当心跳丢失后, 服务端会将其移除.
* 扩展性: 当服务端启动后, 会监听配置文件的变化, 并更新整个集群的节点列表.
* 可用性: Nacos使用同步的方式来保证数据的最终一致性. 在发生网络分区后, 并不会出现少数派无法提供服务.

# 参考资料

> [Nacos AP模型原理](https://blog.csdn.net/Horizon_Zy/article/details/115655436)
